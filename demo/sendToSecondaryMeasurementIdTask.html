<script async src="https://www.googletagmanager.com/gtag/js?id=G-DEBUGEMALL"></script>
<script>

    window.dataLayer = window.dataLayer || [];

    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-DEBUGEMALL', {
        send_page_view: true
    });

</script>
<script>
    !function (e, n) { "object" == typeof exports && "undefined" != typeof module ? module.exports = n() : "function" == typeof define && define.amd ? define(n) : (e = "undefined" != typeof globalThis ? globalThis : e || self).GA4CustomTask = n() }(this, (function () { "use strict"; function e(n) { if (!n || !n.tasks) throw new Error("Invalid settings: tasks are required"); function r(r, t) { var o = !1; try { if ("string" == typeof r && function (e) { try { var n = new URL(e), r = new URLSearchParams(n.search), t = r.get("tid"), o = r.get("cid"), i = r.get("v"); return !!t && t.startsWith("G-") && !!o && "2" === i } catch (e) { return console.error("Error parsing URL:", e), !1 } }(r)) { var i = new URL(r), a = { endpoint: i.origin + i.pathname, sharedPayload: null, events: [] }, c = Array.from(new URLSearchParams(i.search).entries()); t.body ? (a.sharedPayload = Object.fromEntries(c), a.events = t.body.split("\r\n").map((function (e) { return Object.fromEntries(new URLSearchParams(e).entries()) }))) : (a.sharedPayload = Object.fromEntries(c.slice(0, c.findIndex((function (e) { return "en" === e[0] })))), a.events = [Object.fromEntries(c.slice(c.findIndex((function (e) { return "en" === e[0] }))))]); var s = Object.fromEntries(new URLSearchParams(i.search)); if (n.allowedMeasurementIds && Array.isArray(n.allowedMeasurementIds) && !n.allowedMeasurementIds.includes(s.tid)) return e.originalFetch(r, t); Array.isArray(n.tasks) && n.tasks.forEach((function (n) { "function" == typeof n ? a = n.call({ originalFetch: e.originalFetch }, a) : console.warn("Callback is not a function:", n) })), a.events && 0 === a.events.length && (o = !0); var d = function (e) { var n = new URLSearchParams(e.sharedPayload || {}).toString(), r = e.events.map((function (e) { return new URLSearchParams(e).toString() })).join("\r\n"); return { endpoint: e.endpoint, resource: n, body: r } }(a); t.body ? (r = "".concat(d.endpoint, "?").concat(d.resource), t.body = d.body) : r = "".concat(d.endpoint, "?").concat(d.resource, "&").concat(d.body) } } catch (e) { console.error("Error in fetch interceptor:", e) } if (!1 === o) return e.originalFetch(r, t) } return e.originalFetch = window.fetch.bind(window), e.originalFetch && e.originalFetch.toString().includes("native code") && (window.fetch = function () { for (var e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return r.apply(null, e) }), { settings: n } } return e.originalFetch = window.fetch.bind(window), e }));
    var logRequestsToConsoleTask = function () { "use strict"; return function (e) { return console.group("%cReturnOfTheCustomTask: New Request ( ".concat(e.events.length, " Events )"), "color: purple; font-size: large; font-weight: bold;"), console.log(e), console.groupEnd(), e } }();
    var sendToSecondaryMeasurementIdTask=function(){"use strict";return function(e,n,r,t){if(void 0===r&&(r=[]),void 0===t&&(t=[]),!e||!n||!Array.isArray(n)||0===n.length)return console.error("sendToSecondaryMeasurementIdTask: Request and extra measurementIds are required."),e;var o=JSON.parse(JSON.stringify(e));return o.events=function(e,n,r){var t=function(e){return Array.isArray(e)&&e.length>0},o=function(e,n,r){return n?e.filter((function(e){return r?n.has(e.en):!n.has(e.en)})):e};return t(n)?o(e,new Set(n),!0):t(r)?o(e,new Set(r),!1):e}(o.events,r,t),o.events.length>0&&n.forEach((function(e){var n,r,t,a,s,i,c,u,d;if(/^(G-|MC-)[A-Z0-9]+$/.test(e)){o.sharedPayload.tid=e;var l=(t=(r=o).endpoint,a=r.sharedPayload,s=r.events,i=new URLSearchParams(a).toString(),c=s.map((function(e){return new URLSearchParams(e).toString()})),u=1===s.length?"".concat(t,"?").concat(i,"&").concat(c[0]):"".concat(t,"?").concat(i),d={method:"POST",body:null},s.length>1&&(d.body=c.join("\r\n")),{resource:u,options:d});(null===(n=window.GA4CustomTask)||void 0===n?void 0:n.originalFetch)&&window.GA4CustomTask.originalFetch(l.resource,l.options)}else console.error("Invalid MeasurementId Format, skipping",e)})),e}}();


    const ga4CustomTaskInterceptor = new GA4CustomTask({
        allowedMeasurementIds: ["G-DEBUGEMALL"],
        tasks: [
            (requestModel) => sendToSecondaryMeasurementIdTask(requestModel, ["G-SECONDID", "G-DEMO", "G-3534534"], ["purchase"], []),
            logRequestsToConsoleTask
        ]
    });

</script>
<h1>sendToSecondaryMeasurementIdTask</h1>
<pre>
const ga4CustomTaskInterceptor = new GA4CustomTask({
    allowedMeasurementIds: ["G-DEBUGEMALL"],
    tasks: [
        (requestModel) => sendToSecondaryMeasurementIdTask(requestModel, ["G-SECONDID"], [], []), 
        logRequestsToConsoleTask
    ]
});
</pre>