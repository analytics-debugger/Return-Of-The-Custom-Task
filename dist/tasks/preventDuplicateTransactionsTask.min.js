var preventDuplicateTransactionsTask=function(){"use strict";var t={sync:function(t){var e=document.cookie.split("; ").find((function(e){return e.startsWith(t+"=")})),n=localStorage.getItem(t),o=e?e.split("=")[1]:null;if(null!==o){var c=decodeURIComponent(o),a=parseInt(c.split(":")[0],10),r=n?parseInt(n.split(":")[0],10):0;a>r?localStorage.setItem(t,c):r>a&&null!==n&&(document.cookie="".concat(t,"=").concat(encodeURIComponent(n),"; path=/; SameSite=Strict; Secure"))}else null!==n&&(document.cookie="".concat(t,"=").concat(encodeURIComponent(n),"; path=/; SameSite=Strict; Secure"))},get:function(t){this.sync(t);var e=localStorage.getItem(t);return e&&e.split(":")[1]||null},set:function(t,e,n,o,c){void 0===n&&(n=7),void 0===o&&(o="/"),void 0===c&&(c="");var a=Date.now(),r="".concat(a,":").concat(e),i=encodeURIComponent(r);localStorage.setItem(t,r);var s=new Date(Date.now()+864e5*n).toUTCString();document.cookie="".concat(t,"=").concat(i,"; expires=").concat(s,"; path=").concat(o,"; domain=").concat(c,"; SameSite=Strict; Secure")}};return function(e,n){if(void 0===n&&(n="__ad_trans_dedup"),!e)return console.error("preventDuplicateTransactionsTask: Request is required."),e;if(e.events.some((function(t){return"purchase"===t.en}))){var o=[];try{var c=t.get(n);o=c?JSON.parse(c):[]}catch(t){console.error("Failed to parse stored transactions:",t)}e.events=e.events.filter((function(t){return("purchase"!==t.en||!o.includes(t["ep.transaction_id"]))&&(o.push(t["ep.transaction_id"]),!0)})),t.set(n,JSON.stringify(o))}return 0===e.events.length&&(e.__skip=!0),e}}();
