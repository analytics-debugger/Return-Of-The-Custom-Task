var preventDuplicateTransactionsTask=function(){"use strict";var t={sync:function(t){try{var e=null;try{e=this.getDecodedCookie(t)}catch(t){console.error("Error getting cookie:",t)}var r=localStorage.getItem(t);this.set(t,e||r||"")}catch(t){console.error("Error in sync method:",t)}},get:function(t){try{return this.sync(t),localStorage.getItem(t)||null}catch(t){return console.error("Error in get method:",t),null}},set:function(t,e,r,n,o){void 0===r&&(r=7),void 0===n&&(n="/"),void 0===o&&(o="");try{var c=btoa(JSON.stringify(e)),i=new Date(Date.now()+864e5*r).toUTCString();document.cookie="".concat(t,"=").concat(c,"; expires=").concat(i,"; path=").concat(n,"; domain=").concat(o,"; SameSite=Strict; Secure"),localStorage.setItem(t,e)}catch(t){console.error("Error in set method:",t)}},getDecodedCookie:function(t){try{var e=document.cookie.split("; ").find((function(e){return e.startsWith(t+"=")}));if(!e)return null;var r=e.split("=")[1];return JSON.parse(atob(r))}catch(t){return console.error("Error decoding cookie:",t),null}}};return function(e,r){if(void 0===r&&(r="__ad_trans_dedup"),!e)return console.error("preventDuplicateTransactionsTask: Request is required."),e;if(e.events.some((function(t){return"purchase"===t.en}))){var n=[];try{var o=t.get(r);n=o?JSON.parse(o):[]}catch(t){console.error("Failed to parse stored transactions:",t)}e.events=e.events.filter((function(t){return("purchase"!==t.en||!n.includes(t["ep.transaction_id"]))&&(n.push(t["ep.transaction_id"]),!0)})),t.set(r,JSON.stringify(n))}return 0===e.events.length&&(e.__skip=!0),e}}();
