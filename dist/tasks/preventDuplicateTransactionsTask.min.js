var preventDuplicateTransactionsTask=function(){"use strict";var e={sync:function(e){try{var t=null;try{t=this.getDecodedCookie(e)}catch(e){console.error("Error getting cookie:",e)}var r=localStorage.getItem(e);this.set(e,t||r||"")}catch(e){console.error("Error in sync method:",e)}},get:function(e){try{return this.sync(e),localStorage.getItem(e)||null}catch(e){return console.error("Error in get method:",e),null}},set:function(e,t,r,n,o){void 0===r&&(r=7),void 0===n&&(n="/"),void 0===o&&(o="");try{var c=btoa(t),i=new Date(Date.now()+864e5*r).toUTCString();document.cookie="".concat(e,"=").concat(c,"; expires=").concat(i,"; path=").concat(n,"; domain=").concat(o,"; SameSite=Strict; Secure"),localStorage.setItem(e,t)}catch(e){console.error("Error in set method:",e)}},getDecodedCookie:function(e){try{var t=document.cookie.split("; ").find((function(t){return t.startsWith(e+"=")}));if(!t)return null;var r=t.split("=")[1];return JSON.parse(atob(r))}catch(e){return console.error("Error decoding cookie:",e),null}}};return function(t,r){if(void 0===r&&(r="__ad_trans_dedup"),!t)return console.error("preventDuplicateTransactionsTask: Request is required."),t;if(t.events.some((function(e){return"purchase"===e.en}))){var n=[];try{var o=e.get(r);n=o?JSON.parse(o):[]}catch(e){console.error("Failed to parse stored transactions:",e)}t.events=t.events.filter((function(e){return("purchase"!==e.en||!n.includes(e["ep.transaction_id"]))&&(n.push(e["ep.transaction_id"]),!0)})),e.set(r,JSON.stringify(n))}return 0===t.events.length&&(t.__skip=!0),t}}();
